<?xml version="1.0" encoding="UTF-8" ?>
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-3.xsd"
        require-authentication="anonymous-all">
    <transition name="createForm">
        <service-call name="party.PartyServices.create#Party"/>
        <actions>
            <if condition="partyTypeEnumId =='PERSON'" >
                <set field="partyForm" value="../PersonForm"/>
                <else-if condition="partyTypeEnumId == 'PARTY_GROUP'">
                    <set field="partyForm" value="../PartyGroupForm"/>
                </else-if>
                <else>
                    <set field="partyForm" value="."/>
                </else>
            </if>
        </actions>

        <default-response url="${partyForm}"/>
    </transition>

    <widgets>
        <container-dialog id="createParty" button-text="Create Party">
            <form-single name="PartyCreateForm" transition="createForm">

                <auto-fields-service service-name="party.PartyServices.create#Party"  />
                <field name="createdDate">
                    <default-field>
                        <display text="${ec.user.nowTimestamp}"/>
                    </default-field>
                </field>

                <field name="partyTypeEnumId" >

                    <default-field >
                        <drop-down >
<!--                        <list-options list="enumList" key="${partyTypeEnumId}" />-->
                            <option key="PERSON" text="Person Enum"/>
                            <option key="PARTY_GROUP" text="Party Group Enum"/>
                        </drop-down>
                    </default-field>

                </field>
               <field name="submit"><default-field>
                    <submit/>
                </default-field></field>

            </form-single>
        </container-dialog>
    </widgets>
</screen>
